(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{144:function(e,t,n){},145:function(e,t,n){},146:function(e,t,n){},147:function(e,t,n){},148:function(e,t,n){},149:function(e,t,n){},150:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),u=n(16),c=n.n(u),i=(n(70),n(60)),s=n(3),l=n(2),o=n.n(l),p=n(6),m=n(13),f=(n(72),function(){return r.a.createElement("h1",{className:"h1-heading"},"Recipet")}),d=function(){return r.a.createElement("h2",{className:"h3-heading"},"About")},v=Object(s.g)((function(e){var t=e.history,n=e.to,a=e.onClick;return r.a.createElement("h1",{className:"h1-heading",onClick:function(e){a&&a(e),t.push(n)}},"Recipet")})),b=Object(s.g)((function(e){var t=e.history,n=e.to,a=e.onClick;return r.a.createElement("h2",{className:"h2-heading",onClick:function(e){a&&a(e),t.push(n)}},"Recipet")})),g=(n(77),n(33),Object(s.g)((function(e){var t=e.history,n=e.to,a=e.onClick,u=e.id,c=e.className,i=e.text,s=e.type;return r.a.createElement("button",{type:s,id:u,className:c,onClick:function(e){a&&a(e),t.push(n)}},i)}))),h=function(e){var t=e.handleSubmit,n=e.handleUsernameChange,a=e.handlePasswordChange,u=e.username,c=e.password,i=e.buttonText;e.to;return r.a.createElement("div",{className:"center"},r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,r.a.createElement("input",{className:"grey-input",id:"username",value:u,onChange:n})),r.a.createElement("div",null,r.a.createElement("input",{className:"grey-input",id:"password",type:"password",value:c,onChange:a})),r.a.createElement(g,{id:"login-button",text:i,className:"blue-box-button",type:"submit"})))},E=(n(78),n(12)),O=n.n(E),w={getUsers:function(){var e=Object(p.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get("".concat("/api/users","/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getAll:function(){return O.a.get("/api/users").then((function(e){return e.data}))},signUp:function(){var e=Object(p.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.post("/api/users",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},j=function(e){return function(){var t=Object(p.a)(o.a.mark((function t(n){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w.signUp(e);case 3:a=t.sent,n({type:"SIGNUP_USER",createdUser:a}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIGNUP_USER":return t.createdUser;case"NULL_SIGN_UP_USER":return null;default:return e}},N=n(5),k=function(){var e=Object(N.b)();return r.a.createElement("div",{className:"center"},r.a.createElement("p",{className:"black-text"},"Don't have an account?",r.a.createElement(g,{className:"blue-text-button",onClick:function(){e({type:"NULL_SIGN_UP_USER"})},text:"Sign up",to:"/signup"})))},y=(n(42),n(64)),S=null,U={getAll:function(){return O.a.get("/api/recipes").then((function(e){return e.data}))},create:function(){var e=Object(p.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:S}},e.next=3,O.a.post("/api/recipes",t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(e,t){return O.a.put("".concat("/api/recipes","/").concat(e),t).then((function(e){return e.data}))},setToken:function(e){S="bearer ".concat(e)},nullToken:function(){S=null}},C={login:function(){var e=Object(p.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},R=function(e){return function(){var t=Object(p.a)(o.a.mark((function t(n){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C.login(e);case 3:a=t.sent,window.localStorage.setItem("loggedRecipetUser",JSON.stringify(a)),U.setToken(a.token),n({type:"LOGIN_USER",user:a}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},I=function(){return function(){var e=Object(p.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.localStorage.removeItem("loggedRecipetUser"),U.nullToken(),t({type:"LOGOUT_USER"});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_USER":return t.loggedUser;case"LOGIN_USER":return Object(y.a)({},t.user);case"LOGOUT_USER":return null;default:return e}},L=function(){var e=Object(N.b)(),t=Object(a.useState)(""),n=Object(m.a)(t,2),u=n[0],c=n[1],i=Object(a.useState)(""),s=Object(m.a)(i,2),l=s[0],d=s[1],v=function(){var t=Object(p.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault();try{e({type:"NULL_SIGN_UP_USER"}),e(R({username:u,password:l})),c(""),d("")}catch(a){console.log("error")}case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("div",{className:"log-in-and-sign-up-block"},r.a.createElement(f,null),r.a.createElement(h,{username:u,password:l,handleUsernameChange:function(e){var t=e.target;return c(t.value)},handlePasswordChange:function(e){var t=e.target;return d(t.value)},handleSubmit:v,buttonText:"Log In"}),r.a.createElement(k,null)))},T=function(){var e=Object(N.b)(),t=Object(a.useState)(""),n=Object(m.a)(t,2),u=n[0],c=n[1],i=Object(a.useState)(""),s=Object(m.a)(i,2),l=s[0],f=s[1],d=function(){var t=Object(p.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),t.prev=1,!(l.length<3)){t.next=4;break}throw new Error("Password's minimum length is 3");case 4:e(j({username:u,password:l})),c(""),f(""),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log("error");case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"log-in-and-sign-up-block"},r.a.createElement(v,{to:"/"}),r.a.createElement(h,{username:u,password:l,handleUsernameChange:function(e){var t=e.target;return c(t.value)},handlePasswordChange:function(e){var t=e.target;return f(t.value)},handleSubmit:d,buttonText:"Sign Up",to:"/"}))},q=n(59),P=n.n(q),A=function(e){var t=e.recipes;return r.a.createElement(P.a,{images:t})},D=(n(144),n(145),function(e){return r.a.createElement("div",null,r.a.createElement("h3",{id:"h3-heading"},e.user.username),r.a.createElement("p",{id:"hasRecipes"},e.usersRecipeCount," recipes"))}),G=function(e){return r.a.createElement("div",{id:"logged-in-block"},r.a.createElement(D,{user:e.user,usersRecipeCount:function(){if(!e.users)return null;var t=e.users.find((function(t){return t.username===e.user.username}));return t?t.recipes.length:void 0}()}),r.a.createElement(g,{id:"upload-button",text:"Upload Recipe",to:"/upload"}))},F=(n(146),function(){return r.a.createElement("div",null,r.a.createElement("p",null,"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum quis vestibulum tortor. Sed imperdiet dapibus elementum. Ut mauris ante, ultricies sit amet diam et, ullamcorper tristique nisl. Duis pretium consequat sagittis. Nam ultrices facilisis enim, eu ultricies massa feugiat vel. Sed quis gravida orci, eget ultricies sapien. Nullam eleifend erat ut magna ultrices interdum. Curabitur ac lacus quis dui vestibulum scelerisque. In porttitor rutrum hendrerit. Etiam ut ipsum felis. Vestibulum molestie neque in suscipit finibus. Aenean tincidunt lectus enim, ut varius est mollis a. Etiam dignissim mauris eget sapien pellentesque ultrices nec vitae nisl. Aenean sollicitudin sagittis purus, eu rutrum sapien tristique eget. In quis nunc aliquam, facilisis enim congue, gravida ex. In ipsum tortor, blandit ut facilisis ut, accumsan quis ex. Sed sagittis nisi sed justo fringilla, eleifend varius tellus ornare. Fusce iaculis dui dui, at lacinia lectus molestie sed. Sed viverra vitae risus eu congue. Nulla maximus, arcu id vehicula finibus, nisl sem gravida arcu, nec iaculis nisi nisl nec augue. Aliquam efficitur tortor tincidunt, auctor orci sed, ullamcorper massa. Maecenas non enim leo. Nunc malesuada sagittis pretium. Integer et convallis ante. Etiam pretium justo non nisi egestas pellentesque. Ut faucibus nisi quis est ornare porttitor. Fusce consequat eros et sem pharetra, vitae accumsan ipsum dignissim. Etiam eros felis, sollicitudin vel blandit eget, consectetur in felis. Mauris semper nibh eu nunc posuere, non consectetur elit varius. Sed quam tellus, vulputate a venenatis pretium, consequat vel orci."))}),J=(n(147),function(){return r.a.createElement("div",{className:"main-footer"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("p",null,(new Date).getFullYear()," Recipet | Full Stack Open -harjoitusty\xf6 |",r.a.createElement(g,{className:"blue-text-button",text:"About",to:"/about"})))))}),H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEARCH":return t.data;default:return e}},M=(n(148),function(){var e=Object(N.b)();return r.a.createElement("div",{className:"center"},r.a.createElement("input",{className:"search-input",onChange:function(t){e({type:"SEARCH",data:t.target.value})}}))}),z=(n(149),function(e){return r.a.createElement("button",{onClick:e.handleClick,id:e.id,className:e.className},e.text)}),V=(n(56),function(){var e=Object(N.b)();return r.a.createElement("div",{className:"top-block"},r.a.createElement(b,{to:"/"}),r.a.createElement(M,null),r.a.createElement(z,{id:"log-out-button",text:"Log Out",handleClick:function(){e(I())}}))}),W=Object(s.g)((function(e){var t=e.history,n=e.to,a=e.id,u=e.className,c=e.text,i=e.type,s=Object(N.b)(),l=function(){s(I())};return r.a.createElement("button",{type:i,id:a,className:u,onClick:function(e){l&&l(),t.push(n)}},c)})),B=(n(57),n(63)),Y=n(31),K=function(e){return function(){var t=Object(p.a)(o.a.mark((function t(n){var a,r,u,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=function(){var t=Object(p.a)(o.a.mark((function t(){var n,a,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=new FormData).append("file",e),n.append("upload_preset","recipetPreset"),t.next=5,fetch("\thttps://api.cloudinary.com/v1_1/recipet/image/upload",{method:"POST",body:n});case 5:return a=t.sent,t.next=8,a.json();case 8:return r=t.sent,t.abrupt("return",r.secure_url);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.prev=1,t.next=4,a();case 4:if(!(r=t.sent)){t.next=11;break}return u={src:r,thumbnail:r,thumbnailWidth:258,thumbnailHeight:258,caption:e.name,thumbnailCaption:e.name},t.next=9,U.create(u);case 9:c=t.sent,n({type:"CREATE_RECIPE",data:c});case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),console.log(t.t0.message);case 16:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}()},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_RECIPES":return Object(Y.a)(t.data);case"CREATE_RECIPE":return[].concat(Object(Y.a)(e),[t.data]);default:return e}};var X=function(){var e=Object(N.b)(),t=Object(a.useState)([]),n=Object(m.a)(t,2),u=n[0],c=n[1],i=Object(B.a)({accept:"image/*",onDrop:function(e){c(e.map((function(e){return Object.assign(e,{src:URL.createObjectURL(e)})})))}}),s=i.getRootProps,l=i.getInputProps;if(u.length>0)for(var o=0;o<u.length;o++)e(K(u[o]));return r.a.createElement("div",{className:"container"},r.a.createElement("div",s({className:"dropzone"}),r.a.createElement("input",l()),r.a.createElement("p",{id:"drag-text"},"Drag 'n' drop some files here, or click to select files")))},Z=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"top-block"},r.a.createElement(b,{to:"/"}),r.a.createElement(W,{id:"log-out-button",text:"Log Out",to:"/"})),r.a.createElement(X,null))},$=function(e){var t=Object(N.b)();return r.a.createElement("div",{className:"top-block"},r.a.createElement(b,{to:"/"}),r.a.createElement(d,null),e.user?r.a.createElement(z,{id:"log-out-button",text:"Log Out",handleClick:function(){t(I())}}):r.a.createElement(g,{id:"log-out-button",text:"Log In",to:"/"}))},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_USERS":return t.users;default:return e}},te=function(){var e=Object(N.b)();Object(a.useEffect)((function(){e(function(){var e=Object(p.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.getAll();case 3:n=e.sent,t({type:"INIT_RECIPES",data:n}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()),e(function(){var e=Object(p.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=JSON.parse(window.localStorage.getItem("loggedRecipetUser")))&&(U.setToken(n.token),t({type:"INIT_USER",loggedUser:n}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e(function(){var e=Object(p.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.getAll();case 2:n=e.sent,t({type:"INIT_USERS",users:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]);var t=Object(N.c)((function(e){return e.recipes})),n=Object(N.c)((function(e){return e.user})),u=Object(N.c)((function(e){return e.users})),c=Object(N.c)((function(e){return e.signUpUser})),l=function(){var e=t.filter((function(e){return e.user.username===n.username})),a=Object(N.c)((function(e){return e.filter})),c=e.filter((function(e){return e.thumbnailCaption.toLowerCase().indexOf(a.toLowerCase())>-1}));return r.a.createElement("div",null,r.a.createElement(V,null),r.a.createElement(G,{user:n,users:u}),r.a.createElement(A,{recipes:c}),r.a.createElement(J,null))},m=function(){return r.a.createElement("div",null,r.a.createElement(L,null),r.a.createElement(J,null))},f=function(){return r.a.createElement("div",null,r.a.createElement(T,null),r.a.createElement(J,null))},d=function(){return r.a.createElement("div",null,r.a.createElement(Z,{user:n}),r.a.createElement(J,null))},v=function(){return r.a.createElement("div",null,r.a.createElement($,{user:n}),r.a.createElement(F,null),r.a.createElement(J,null))};return r.a.createElement("div",{className:"page-container"},r.a.createElement("div",{className:"content-wrap"},r.a.createElement(i.a,null,r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/login"},r.a.createElement(m,null)),r.a.createElement(s.b,{path:"/signup"},c?r.a.createElement(s.a,{to:"/"}):r.a.createElement(f,null)),r.a.createElement(s.b,{path:"/upload"},r.a.createElement(d,null)),r.a.createElement(s.b,{path:"/about"},r.a.createElement(v,null)),r.a.createElement(s.b,{path:"/"},null===n?r.a.createElement(m,null):r.a.createElement(l,null))))))},ne=n(17),ae=n(61),re=n(62),ue=Object(ne.combineReducers)({recipes:Q,user:_,users:ee,filter:H,signUpUser:x}),ce=Object(ne.createStore)(ue,Object(re.composeWithDevTools)(Object(ne.applyMiddleware)(ae.a)));c.a.render(r.a.createElement(N.a,{store:ce},r.a.createElement(te,null)),document.getElementById("root"))},33:function(e,t,n){},42:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},65:function(e,t,n){e.exports=n(150)},70:function(e,t,n){},72:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){}},[[65,1,2]]]);
//# sourceMappingURL=main.001cbb5d.chunk.js.map